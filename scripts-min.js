import{playlist as videos}from"./playlist.js";const videosArray=Object.entries(videos),availableVideos=["FTQbiNvZqaY","J9gKyRmic20","djV11Xbc914","CdqoNKCCt7A","aENX1Sf3fgQ","dQw4w9WgXcQ","hTWKbfoikeg","3qVPNONdF58","rog8ou-ZepE","eBShN8qT4lk","dTAAsCNK7RA","XfR9iY5y94s","LKYPYj2XX80","K1b8AhIsSYQ","E1fzJ_AYajA","5IsSpAOD6K8","4JkIs37a2JE","AjPau5QYtYs","JmcA9LIIXWw","Jne9t8sHpUc","L_jWHffIx5E","LuN6gs0AJls","PIb6AZdTr-A","PWgvGjAhvIw","hIs5StN8J-0","l7vRSu_wsNc","oIb9QUGjdIc","r3kQlzOi27M","uPudE8nDog0","uejh-bHa4To","GHhD4PD75zY","JkRKT6T0QLg","LatorN4P9aA","QqqBs6kkzHE","SwrYMWoqg5w","Yf_Lwe6p-Cg","ejorQVy3m8E","ijAYN9zVnwg","m3-hY-hlhBg","rkpG4XApJ28","uq-gYOrU8bA","z5rRZdiu1UE"];let myStorage=window.localStorage;const queryString=new Proxy(new URLSearchParams(window.location.search),{get:(e,t)=>e.get(t)});let overrideDate=queryString.dateoverride;const startDate=new Date("16 Mar 2022");let todayDate=new Date;overrideDate&&(console.log("override"),todayDate=new Date(overrideDate));const todayDateString=todayDate.toDateString(),getTheWordIndexForToday=()=>{const e=todayDate.getTime()-startDate.getTime();return Math.floor(Math.abs(e/864e5))%availableVideos.length},theVideo=availableVideos[getTheWordIndexForToday()],chooser=document.getElementById("chooser"),nextVideo=document.getElementById("nextVideo");nextVideo.innerHTML=Math.round((86400-Math.floor(new Date/1e3)%86400)/60);let imageClasses=["bg1","bg2","bg3","bg4","bg5","bg6"],imageIndex=0;const mainImage=document.getElementById("main_image");mainImage.style.backgroundImage="url('gifs/"+theVideo+".gif')";const results=document.getElementById("results");let chooser_term="";if(null!=myStorage.getItem(todayDateString)){let e=JSON.parse(myStorage.getItem(todayDateString));imageIndex=e.index,checkAnswer(e.answer)}function checkAnswer(e){mainImage.classList.remove(imageClasses[imageIndex]),chooser.value="";let t="guess"+(imageIndex+1);if(5===imageIndex||null!=e&&atob(e)==theVideo){let a=!0;null==e&&(a=!1,e=btoa(theVideo));let s={index:imageIndex,answer:e};myStorage.setItem(todayDateString,JSON.stringify(s)),mainImage.classList.add("bgfinal"),document.getElementById("search-label").remove(),document.getElementById("search-input").remove();const n=document.createElement("h1");n.innerHTML='<a href="https://www.youtube.com/watch?v='+theVideo+'" target="_blank">'+videos[e]+"</a>",results.appendChild(n);let o="Videordle.com ("+todayDate.toLocaleDateString()+"):";if(a)for(let e=0;e<6;e++){if(e==imageIndex){o+=" 🟩";break}o+=" ⬛"}else o+=" ⬛ ⬛ ⬛ ⬛ ⬛ ⬛";const i=document.createElement("div");i.id="resultsCopy",i.innerHTML=o,results.appendChild(i),results.appendChild(document.createElement("br"));const r=document.createElement("button");r.id="shareButton",r.classList.add("btn","btn-primary","btn-sm"),r.innerHTML="Copy results for sharing",results.appendChild(r),r.addEventListener("click",e=>{navigator.clipboard.writeText(o).then(()=>{alert("Copied to clipboard")})});let d=document.getElementById(t),l=videos[e];return a?(l="✅ "+l,d.classList.add("bg-success","bg-gradient","bg-opacity-25")):(l="❌ "+l,d.classList.add("bg-danger","bg-gradient","bg-opacity-25")),void(d.innerHTML=l)}mainImage.classList.add(imageClasses[imageIndex+1]),imageIndex++;let a=document.getElementById(t),s=null==e?"":videos[e];a.classList.add("bg-danger","bg-gradient","bg-opacity-25"),a.innerHTML="❌ "+s}const searchVideos=async()=>{results.innerHTML="";const e=document.createElement("ul");e.classList.add("list-group"),e.id="chooser_list",videosArray.filter(([e,t])=>t.toLowerCase().includes(chooser_term.toLowerCase())).forEach(([t,a])=>{const s=document.createElement("li");s.dataset.videoId=t,s.classList.add("list-group-item"),s.classList.add("list-group-item-action"),s.classList.add("videoList"),s.innerText=a,e.appendChild(s)}),results.appendChild(e),e.addEventListener("click",function(t){if(t.target&&t.target.matches("li.videoList")){let a=t.target.dataset.videoId;e.remove(),checkAnswer(a)}})};chooser.addEventListener("input",e=>{(chooser_term=e.target.value).length>1?searchVideos():results.innerHTML=""});const submitAnswer=document.getElementById("submitAnswer");submitAnswer&&submitAnswer.addEventListener("click",e=>{chooser.value="",checkAnswer()});